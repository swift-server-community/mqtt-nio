{"schemaVersion":{"major":0,"patch":0,"minor":3},"abstract":[{"text":"A Swift NIO based MQTT client","type":"text"}],"hierarchy":{"paths":[[]]},"primaryContentSections":[{"content":[{"type":"heading","text":"Overview","level":2,"anchor":"overview"},{"inlineContent":[{"type":"text","text":"MQTT (Message Queuing Telemetry Transport) is a lightweight messaging protocol that was developed by IBM and first released in 1999. It uses the pub\/sub pattern and translates messages between devices, servers, and applications. It is commonly used in Internet of things (IoT) technologies."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"MQTTNIO is a Swift NIO based implementation of a MQTT client. It supports","type":"text"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"MQTT versions 3.1.1 and 5.0.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Unencrypted and encrypted (via TLS) connections"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"WebSocket connections","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Posix sockets"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Appleâ€™s Network framework via "},{"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/apple\/swift-nio-transport-services"},{"text":" (required for iOS).","type":"text"}]}]}],"type":"unorderedList"},{"anchor":"Usage","type":"heading","text":"Usage","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"Create a client and connect to the MQTT broker."}]},{"syntax":"swift","code":["let client = MQTTClient(","    host: \"mqtt.eclipse.org\",","    port: 1883,","    identifier: \"My Client\",","    eventLoopGroupProvider: .createNew",")","do {","    try await client.connect()","    print(\"Succesfully connected\")","} catch {","    print(\"Error while connecting \\(error)\")","}"],"type":"codeListing"},{"inlineContent":[{"type":"text","text":"Subscribe to a topic and add a publish listener to report publish messages sent from the server\/broker."}],"type":"paragraph"},{"syntax":"swift","code":["let subscription = MQTTSubscribeInfo(topicFilter: \"my-topics\", qos: .atLeastOnce)","_ = try await client.subscribe(to: [subscription])","let listener = client.createPublishListener()","for await result in listener {","    switch result {","    case .success(let publish):","        if publish.topicName == \"my-topics\" {","            var buffer = publish.payload","            let string = buffer.readString(length: buffer.readableBytes)","            print(string)","        }","    case .failure(let error):","        print(\"Error while receiving PUBLISH event\")","    }","}"],"type":"codeListing"},{"inlineContent":[{"text":"Publish to a topic.","type":"text"}],"type":"paragraph"},{"code":["try await client.publish(","    to: \"my-topics\",","    payload: ByteBuffer(string: \"This is the Test payload\"),","    qos: .atLeastOnce",")"],"syntax":"swift","type":"codeListing"},{"type":"paragraph","inlineContent":[{"type":"text","text":"MQTTClient supports both Swift concurrency and SwiftNIO "},{"type":"codeVoice","code":"EventLoopFuture"},{"type":"text","text":". The above examples use Swift concurrency but there are equivalent versions of these functions that return "},{"type":"codeVoice","code":"EventLoopFuture"},{"type":"text","text":"s. You can find out more about Swift NIO and "},{"code":"EventLoopFuture","type":"codeVoice"},{"type":"text","text":" "},{"identifier":"https:\/\/swiftpackageindex.com\/apple\/swift-nio\/main\/documentation\/niocore\/eventloopfuture","type":"reference","isActive":true},{"type":"text","text":"."}]}],"kind":"content"}],"variants":[{"paths":["\/documentation\/mqttnio"],"traits":[{"interfaceLanguage":"swift"}]}],"sections":[],"topicSections":[{"title":"Articles","anchor":"Articles","identifiers":["doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/mqttnio-v5","doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/mqttnio-connections","doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/mqttnio-aws"]},{"identifiers":["doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTClient"],"title":"Client","anchor":"Client"},{"identifiers":["doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTSubscribeInfo","doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTSuback","doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTPublishInfo","doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTPublishListener","doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTQoS","doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTPacketType"],"anchor":"SubscribePublish","title":"Subscribe\/Publish"},{"identifiers":["doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTError","doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTPacketError"],"title":"Errors","anchor":"Errors"},{"anchor":"V5-Connection","identifiers":["doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTConnackV5"],"title":"V5 Connection"},{"title":"V5 Subscribe\/Publish","identifiers":["doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTSubscribeInfoV5","doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTProperties","doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTReasonCode","doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTAckV5","doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTSubackV5","doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTPublishIdListener"],"anchor":"V5-SubscribePublish"},{"identifiers":["doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTAuthV5"],"anchor":"V5-Authentication","title":"V5 Authentication"},{"anchor":"TLS","title":"TLS","identifiers":["doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/TSTLSConfiguration","doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/TSTLSVersion","doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/TSCertificateVerification"]}],"identifier":{"url":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO","interfaceLanguage":"swift"},"metadata":{"title":"MQTTNIO","externalID":"MQTTNIO","roleHeading":"Framework","role":"collection","modules":[{"name":"MQTTNIO"}],"symbolKind":"module"},"kind":"symbol","references":{"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/MQTTConnackV5":{"kind":"symbol","navigatorTitle":[{"text":"MQTTConnackV5","kind":"identifier"}],"role":"symbol","identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTConnackV5","title":"MQTTConnackV5","type":"topic","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"MQTTConnackV5","kind":"identifier"}],"abstract":[{"type":"text","text":"MQTT v5 Connack"}],"url":"\/documentation\/mqttnio\/mqttconnackv5"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/TSCertificateVerification":{"role":"symbol","type":"topic","fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"text":"TSCertificateVerification","kind":"identifier"}],"kind":"symbol","title":"TSCertificateVerification","abstract":[{"text":"Certificate verification modes.","type":"text"}],"url":"\/documentation\/mqttnio\/tscertificateverification","identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/TSCertificateVerification","navigatorTitle":[{"text":"TSCertificateVerification","kind":"identifier"}]},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/MQTTError":{"identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTError","abstract":[{"type":"text","text":"MQTTClient errors"}],"fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"MQTTError"}],"kind":"symbol","role":"symbol","title":"MQTTError","url":"\/documentation\/mqttnio\/mqtterror","navigatorTitle":[{"text":"MQTTError","kind":"identifier"}],"type":"topic"},"https://github.com/apple/swift-nio-transport-services":{"type":"link","title":"NIOTransportServices","titleInlineContent":[{"type":"text","text":"NIOTransportServices"}],"url":"https:\/\/github.com\/apple\/swift-nio-transport-services","identifier":"https:\/\/github.com\/apple\/swift-nio-transport-services"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/MQTTQoS":{"url":"\/documentation\/mqttnio\/mqttqos","fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"text":"MQTTQoS","kind":"identifier"}],"identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTQoS","kind":"symbol","title":"MQTTQoS","navigatorTitle":[{"kind":"identifier","text":"MQTTQoS"}],"role":"symbol","type":"topic","abstract":[{"type":"text","text":"Indicates the level of assurance for delivery of a packet."}]},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/mqttnio-connections":{"identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/mqttnio-connections","abstract":[{"type":"text","text":"Support for TLS, WebSockets, and Unix Domain Sockets."}],"type":"topic","url":"\/documentation\/mqttnio\/mqttnio-connections","kind":"article","title":"Connections","role":"article"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/mqttnio-v5":{"type":"topic","identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/mqttnio-v5","title":"MQTT Version 5.0","role":"article","url":"\/documentation\/mqttnio\/mqttnio-v5","abstract":[{"type":"text","text":"MQTTNIO support for MQTT v5 protocol."}],"kind":"article"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/MQTTAckV5":{"url":"\/documentation\/mqttnio\/mqttackv5","type":"topic","abstract":[{"type":"text","text":"MQTT v5 ACK information. Returned with PUBACK, PUBREL"}],"kind":"symbol","role":"symbol","navigatorTitle":[{"kind":"identifier","text":"MQTTAckV5"}],"title":"MQTTAckV5","fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"MQTTAckV5"}],"identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTAckV5"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/mqttnio-aws":{"title":"AWS IoT","url":"\/documentation\/mqttnio\/mqttnio-aws","abstract":[{"type":"text","text":"Using MQTTNIO with AWS IoT."}],"kind":"article","type":"topic","role":"article","identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/mqttnio-aws"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/TSTLSConfiguration":{"title":"TSTLSConfiguration","abstract":[{"type":"text","text":"TLS configuration for NIO Transport Services"}],"role":"symbol","navigatorTitle":[{"kind":"identifier","text":"TSTLSConfiguration"}],"type":"topic","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"TSTLSConfiguration"}],"kind":"symbol","url":"\/documentation\/mqttnio\/tstlsconfiguration","identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/TSTLSConfiguration"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/MQTTSubscribeInfo":{"kind":"symbol","title":"MQTTSubscribeInfo","url":"\/documentation\/mqttnio\/mqttsubscribeinfo","role":"symbol","navigatorTitle":[{"text":"MQTTSubscribeInfo","kind":"identifier"}],"abstract":[{"text":"MQTT SUBSCRIBE packet parameters.","type":"text"}],"fragments":[{"kind":"keyword","text":"struct"},{"text":" ","kind":"text"},{"kind":"identifier","text":"MQTTSubscribeInfo"}],"identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTSubscribeInfo","type":"topic"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/TSTLSVersion":{"url":"\/documentation\/mqttnio\/tstlsversion","abstract":[{"type":"text","text":"TLS Version enumeration"}],"role":"symbol","navigatorTitle":[{"text":"TSTLSVersion","kind":"identifier"}],"kind":"symbol","title":"TSTLSVersion","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"text":"TSTLSVersion","kind":"identifier"}],"type":"topic","identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/TSTLSVersion"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/MQTTClient":{"title":"MQTTClient","identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTClient","role":"symbol","abstract":[{"text":"Swift NIO MQTT Client","type":"text"}],"url":"\/documentation\/mqttnio\/mqttclient","navigatorTitle":[{"text":"MQTTClient","kind":"identifier"}],"kind":"symbol","fragments":[{"text":"class","kind":"keyword"},{"kind":"text","text":" "},{"text":"MQTTClient","kind":"identifier"}],"type":"topic"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/MQTTPublishIdListener":{"identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTPublishIdListener","navigatorTitle":[{"text":"MQTTPublishIdListener","kind":"identifier"}],"url":"\/documentation\/mqttnio\/mqttpublishidlistener","abstract":[{"type":"text","text":"MQTT Publish message listener, that filters messages by subscription identifier"}],"type":"topic","kind":"symbol","title":"MQTTPublishIdListener","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"MQTTPublishIdListener","kind":"identifier"}],"role":"symbol"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/MQTTAuthV5":{"fragments":[{"kind":"keyword","text":"struct"},{"text":" ","kind":"text"},{"text":"MQTTAuthV5","kind":"identifier"}],"navigatorTitle":[{"kind":"identifier","text":"MQTTAuthV5"}],"type":"topic","title":"MQTTAuthV5","url":"\/documentation\/mqttnio\/mqttauthv5","abstract":[{"type":"text","text":"MQTT V5 Auth packet"}],"role":"symbol","kind":"symbol","identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTAuthV5"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/MQTTPacketError":{"identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTPacketError","navigatorTitle":[{"text":"MQTTPacketError","kind":"identifier"}],"title":"MQTTPacketError","kind":"symbol","url":"\/documentation\/mqttnio\/mqttpacketerror","role":"symbol","abstract":[{"text":"Errors generated by bad packets sent by the client","type":"text"}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"MQTTPacketError"}],"type":"topic"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/MQTTPublishListener":{"fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"text":"MQTTPublishListener","kind":"identifier"}],"kind":"symbol","navigatorTitle":[{"text":"MQTTPublishListener","kind":"identifier"}],"url":"\/documentation\/mqttnio\/mqttpublishlistener","type":"topic","abstract":[{"type":"text","text":"MQTT Publish message listener AsyncSequence"}],"identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTPublishListener","title":"MQTTPublishListener","role":"symbol"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/MQTTPublishInfo":{"kind":"symbol","title":"MQTTPublishInfo","url":"\/documentation\/mqttnio\/mqttpublishinfo","role":"symbol","navigatorTitle":[{"text":"MQTTPublishInfo","kind":"identifier"}],"abstract":[{"type":"text","text":"MQTT PUBLISH packet parameters."}],"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"text":"MQTTPublishInfo","kind":"identifier"}],"identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTPublishInfo","type":"topic"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO":{"url":"\/documentation\/mqttnio","role":"collection","title":"MQTTNIO","abstract":[{"type":"text","text":"A Swift NIO based MQTT client"}],"identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO","kind":"symbol","type":"topic"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/MQTTReasonCode":{"role":"symbol","url":"\/documentation\/mqttnio\/mqttreasoncode","identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTReasonCode","fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"MQTTReasonCode"}],"type":"topic","kind":"symbol","title":"MQTTReasonCode","abstract":[{"text":"MQTT v5.0 reason codes.","type":"text"}],"navigatorTitle":[{"kind":"identifier","text":"MQTTReasonCode"}]},"https://swiftpackageindex.com/apple/swift-nio/main/documentation/niocore/eventloopfuture":{"type":"link","title":"here","titleInlineContent":[{"text":"here","type":"text"}],"url":"https:\/\/swiftpackageindex.com\/apple\/swift-nio\/main\/documentation\/niocore\/eventloopfuture","identifier":"https:\/\/swiftpackageindex.com\/apple\/swift-nio\/main\/documentation\/niocore\/eventloopfuture"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/MQTTProperties":{"type":"topic","kind":"symbol","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"text":"MQTTProperties","kind":"identifier"}],"abstract":[{"type":"text","text":"MQTT v5.0 properties. A property consists of a identifier and a value"}],"url":"\/documentation\/mqttnio\/mqttproperties","title":"MQTTProperties","role":"symbol","identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTProperties","navigatorTitle":[{"text":"MQTTProperties","kind":"identifier"}]},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/MQTTPacketType":{"fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"text":"MQTTPacketType","kind":"identifier"}],"title":"MQTTPacketType","navigatorTitle":[{"text":"MQTTPacketType","kind":"identifier"}],"type":"topic","identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTPacketType","kind":"symbol","url":"\/documentation\/mqttnio\/mqttpackettype","abstract":[{"text":"MQTT Packet type enumeration","type":"text"}],"role":"symbol"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/MQTTSuback":{"navigatorTitle":[{"text":"MQTTSuback","kind":"identifier"}],"abstract":[{"text":"MQTT Sub ACK","type":"text"}],"fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"text":"MQTTSuback","kind":"identifier"}],"kind":"symbol","url":"\/documentation\/mqttnio\/mqttsuback","role":"symbol","identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTSuback","title":"MQTTSuback","type":"topic"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/MQTTSubackV5":{"url":"\/documentation\/mqttnio\/mqttsubackv5","type":"topic","abstract":[{"type":"text","text":"MQTT v5 Sub ACK packet"}],"kind":"symbol","role":"symbol","navigatorTitle":[{"text":"MQTTSubackV5","kind":"identifier"}],"title":"MQTTSubackV5","fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"text":"MQTTSubackV5","kind":"identifier"}],"identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTSubackV5"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/MQTTSubscribeInfoV5":{"type":"topic","role":"symbol","abstract":[{"type":"text","text":"MQTT v5 SUBSCRIBE packet parameters."}],"kind":"symbol","url":"\/documentation\/mqttnio\/mqttsubscribeinfov5","identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/MQTTSubscribeInfoV5","title":"MQTTSubscribeInfoV5","navigatorTitle":[{"text":"MQTTSubscribeInfoV5","kind":"identifier"}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"MQTTSubscribeInfoV5"}]}}}