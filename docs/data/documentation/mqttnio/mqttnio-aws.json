{"primaryContentSections":[{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The MQTT client can be used to connect to AWS IoT brokers. You can use both a WebSocket connection authenticated using AWS Signature V4 and a standard connection using a X.509 client certificate. If you are using a X.509 certificate make sure you update the attached role to allow your client id to connect and which topics you can subscribe, publish to."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you are using an AWS Signature V4 authenticated WebSocket connection you can use the V4 signer from "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/soto-project\/soto"},{"type":"text","text":" to sign your initial request as follows"}]},{"type":"codeListing","syntax":"swift","code":["import SotoSignerV4","","let host = \"MY_AWS_IOT_ENDPOINT.iot.eu-west-1.amazonaws.com\"","let headers = HTTPHeaders([(\"host\", host)])","let signer = AWSSigner(","    credentials: StaticCredential(accessKeyId: \"MYACCESSKEY\", secretAccessKey: \"MYSECRETKEY\"),","    name: \"iotdata\",","    region: \"eu-west-1\"",")","let signedURL = signer.signURL(","    url: URL(string: \"https:\/\/\\(host)\/mqtt\")!,","    method: .GET,","    headers: headers,","    body: .none,","    expires: .minutes(30)",")","let requestURI = \"\/mqtt?\\(signedURL.query!)\"","let client = MQTTClient(","    host: host,","    identifier: \"MyAWSClient\",","    eventLoopGroupProvider: .createNew,","    configuration: .init(useSSL: true, useWebSockets: true, webSocketURLPath: requestUri)",")"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can find out more about connecting to AWS brokers "},{"type":"reference","isActive":true,"identifier":"https:\/\/docs.aws.amazon.com\/iot\/latest\/developerguide\/protocols.html"}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/mqttnio\/mqttnio-aws"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/mqttnio-aws","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Using MQTTNIO with AWS IoT."}],"kind":"article","metadata":{"roleHeading":"Article","title":"AWS IoT","role":"article","modules":[{"name":"MQTTNIO"}]},"hierarchy":{"paths":[["doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO"]]},"seeAlsoSections":[{"title":"Articles","identifiers":["doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/mqttnio-v5","doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/mqttnio-connections"],"generated":true}],"references":{"https://docs.aws.amazon.com/iot/latest/developerguide/protocols.html":{"title":"here","titleInlineContent":[{"type":"text","text":"here"}],"type":"link","identifier":"https:\/\/docs.aws.amazon.com\/iot\/latest\/developerguide\/protocols.html","url":"https:\/\/docs.aws.amazon.com\/iot\/latest\/developerguide\/protocols.html"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/mqttnio-v5":{"role":"article","title":"MQTT Version 5.0","abstract":[{"type":"text","text":"MQTTNIO support for MQTT v5 protocol."}],"identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/mqttnio-v5","kind":"article","type":"topic","url":"\/documentation\/mqttnio\/mqttnio-v5"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/mqttnio-connections":{"role":"article","title":"Connections","abstract":[{"type":"text","text":"Support for TLS and WebSockets."}],"identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/mqttnio-connections","kind":"article","type":"topic","url":"\/documentation\/mqttnio\/mqttnio-connections"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO":{"role":"collection","title":"MQTTNIO","abstract":[{"type":"text","text":"A Swift NIO based MQTT client"}],"identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO","kind":"symbol","type":"topic","url":"\/documentation\/mqttnio"},"https://github.com/soto-project/soto":{"title":"SotoCore","titleInlineContent":[{"type":"text","text":"SotoCore"}],"type":"link","identifier":"https:\/\/github.com\/soto-project\/soto","url":"https:\/\/github.com\/soto-project\/soto"}}}