{"variants":[{"paths":["\/documentation\/mqttnio\/mqttnio-aws"],"traits":[{"interfaceLanguage":"swift"}]}],"schemaVersion":{"major":0,"patch":0,"minor":3},"seeAlsoSections":[{"generated":true,"identifiers":["doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/mqttnio-v5","doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/mqttnio-connections"],"title":"Articles","anchor":"Articles"}],"hierarchy":{"paths":[["doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO"]]},"primaryContentSections":[{"content":[{"text":"Overview","type":"heading","level":2,"anchor":"overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The MQTT client can be used to connect to AWS IoT brokers. You can use both a WebSocket connection authenticated using AWS Signature V4 and a standard connection using a X.509 client certificate. If you are using a X.509 certificate make sure you update the attached role to allow your client id to connect and which topics you can subscribe, publish to."}]},{"type":"paragraph","inlineContent":[{"text":"If you are using an AWS Signature V4 authenticated WebSocket connection you can use the V4 signer from ","type":"text"},{"type":"reference","identifier":"https:\/\/github.com\/soto-project\/soto","isActive":true},{"text":" to sign your initial request as follows","type":"text"}]},{"code":["import SotoSignerV4","","let host = \"MY_AWS_IOT_ENDPOINT.iot.eu-west-1.amazonaws.com\"","let headers = HTTPHeaders([(\"host\", host)])","let signer = AWSSigner(","    credentials: StaticCredential(accessKeyId: \"MYACCESSKEY\", secretAccessKey: \"MYSECRETKEY\"),","    name: \"iotdata\",","    region: \"eu-west-1\"",")","let signedURL = signer.signURL(","    url: URL(string: \"https:\/\/\\(host)\/mqtt\")!,","    method: .GET,","    headers: headers,","    body: .none,","    expires: .minutes(30)",")","let requestURI = \"\/mqtt?\\(signedURL.query!)\"","let client = MQTTClient(","    host: host,","    identifier: \"MyAWSClient\",","    eventLoopGroupProvider: .createNew,","    configuration: .init(useSSL: true, webSocketConfiguration: .init(urlPath: requestUri))",")"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"You can find out more about connecting to AWS brokers ","type":"text"},{"type":"reference","identifier":"https:\/\/docs.aws.amazon.com\/iot\/latest\/developerguide\/protocols.html","isActive":true}]}],"kind":"content"}],"sections":[],"kind":"article","identifier":{"url":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/mqttnio-aws","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Using MQTTNIO with AWS IoT."}],"metadata":{"modules":[{"name":"MQTTNIO"}],"role":"article","title":"AWS IoT","roleHeading":"Article"},"references":{"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/mqttnio-v5":{"type":"topic","identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/mqttnio-v5","title":"MQTT Version 5.0","role":"article","url":"\/documentation\/mqttnio\/mqttnio-v5","abstract":[{"type":"text","text":"MQTTNIO support for MQTT v5 protocol."}],"kind":"article"},"https://github.com/soto-project/soto":{"url":"https:\/\/github.com\/soto-project\/soto","identifier":"https:\/\/github.com\/soto-project\/soto","titleInlineContent":[{"type":"text","text":"SotoCore"}],"title":"SotoCore","type":"link"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO/mqttnio-connections":{"identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO\/mqttnio-connections","abstract":[{"type":"text","text":"Support for TLS, WebSockets, and Unix Domain Sockets."}],"type":"topic","url":"\/documentation\/mqttnio\/mqttnio-connections","kind":"article","title":"Connections","role":"article"},"https://docs.aws.amazon.com/iot/latest/developerguide/protocols.html":{"url":"https:\/\/docs.aws.amazon.com\/iot\/latest\/developerguide\/protocols.html","identifier":"https:\/\/docs.aws.amazon.com\/iot\/latest\/developerguide\/protocols.html","titleInlineContent":[{"type":"text","text":"here"}],"title":"here","type":"link"},"doc://org.swift-server-community.mqtt-nio/documentation/MQTTNIO":{"url":"\/documentation\/mqttnio","role":"collection","title":"MQTTNIO","abstract":[{"type":"text","text":"A Swift NIO based MQTT client"}],"identifier":"doc:\/\/org.swift-server-community.mqtt-nio\/documentation\/MQTTNIO","kind":"symbol","type":"topic"}}}